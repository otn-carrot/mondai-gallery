(function(t){function i(i){for(var e,o,l=i[0],r=i[1],c=i[2],u=0,m=[];u<l.length;u++)o=l[u],n[o]&&m.push(n[o][0]),n[o]=0;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);d&&d(i);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,i=0;i<s.length;i++){for(var a=s[i],e=!0,l=1;l<a.length;l++){var r=a[l];0!==n[r]&&(e=!1)}e&&(s.splice(i--,1),t=o(o.s=a[0]))}return t}var e={},n={app:0},s=[];function o(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,i,a){o.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,i){if(1&i&&(t=o(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)o.d(a,e,function(i){return t[i]}.bind(null,e));return a},o.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=i,l=l.slice();for(var c=0;c<l.length;c++)i(l[c]);var d=r;s.push([0,"chunk-vendors"]),a()})({0:function(t,i,a){t.exports=a("56d7")},"034f":function(t,i,a){"use strict";var e=a("c21b"),n=a.n(e);n.a},"4dba":function(t,i,a){"use strict";var e=a("ddf5"),n=a.n(e);n.a},"56d7":function(t,i,a){"use strict";a.r(i);a("cadf"),a("551c"),a("097d");var e=a("2b0e"),n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"container is-fluid"},[a("div",{attrs:{id:"heading"}},[a("nav",{staticClass:"navbar is-fixed-top is-primary",attrs:{role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"navbar-brand"},[a("router-link",{staticClass:"is-light navbar-item",attrs:{to:"/"}},[a("span",[t._v("問題集")]),a("b-tag",{staticClass:"is-danger"},[t._v("BETA")])],1),a("div",{staticClass:"navbar-burger burger",attrs:{"data-target":"navbar1"},on:{click:function(i){t.showNav=!t.showNav}}},[a("span"),a("span"),a("span")])],1),a("div",{staticClass:"navbar-menu",class:{"is-active":t.showNav},attrs:{id:"navbar1"}},[a("div",{staticClass:"navbar-start"},[a("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[a("b-icon",{attrs:{icon:"home"}}),a("span",[t._v("ホーム")])],1),a("router-link",{staticClass:"navbar-item",attrs:{to:"/add"}},[a("b-icon",{attrs:{icon:"plus-circle"}}),a("span",[t._v("リストを追加")])],1),a("router-link",{staticClass:"navbar-item",attrs:{to:"/contact"}},[a("b-icon",{attrs:{icon:"contacts"}}),a("span",[t._v("お問い合わせ")])],1)],1),a("div",{staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[a("a",{staticClass:"navbar-link"},[t._v("\n              ようこそ、"+t._s(t.user.nickname)+"さん\n              ")]),a("div",{staticClass:"navbar-dropdown"},[t.user.username?a("router-link",{staticClass:"navbar-item",attrs:{to:"/mypage"}},[a("b-icon",{attrs:{icon:"account"}}),a("span",[t._v("マイページ")])],1):t._e(),t.user.username?a("a",{staticClass:"navbar-item",on:{click:function(i){t.logout()}}},[a("b-icon",{attrs:{icon:"logout"}}),a("span",[t._v("ログアウト")])],1):a("router-link",{staticClass:"navbar-item",attrs:{to:"/login"}},[a("b-icon",{attrs:{icon:"login"}}),a("span",[t._v("ログイン")])],1),a("router-link",{staticClass:"navbar-item",attrs:{to:"/signup"}},[a("b-icon",{attrs:{icon:"account-plus"}}),a("span",[t._v("新規登録")])],1)],1)])])])])]),a("router-view")],1),a("footer",{staticClass:"footer"},[a("div",{staticClass:"content has-text-centered"},[a("p",[a("strong",[t._v("[未定]")]),t._v(" by "),a("router-link",{attrs:{to:"/contact"}},[t._v("人参")]),t._v(". The source code is licensed\n        "),a("a",{attrs:{href:"http://opensource.org/licenses/mit-license.php"}},[t._v("MIT")]),t._v(".\n      ")],1)])])])},s=[],o={data:function(){return{showNav:!1}},name:"App",computed:{user:function(){return this.$store.state.user}},mounted:function(){var t=this;t.getUser()},methods:{getUser:function(){var t=this;this.$http.get("/api/user").then(function(i){i.data.username?t.$store.commit("setUser",i.data):t.$store.commit("setUser",{nickname:"Guest"})}).catch(function(i){console.log(i),t.$store.commit("setUser",{nickname:"Guest"})})},logout:function(){var t=this;this.$http.get("/api/logout").then(function(i){t.getUser(),t.$router.push("/login")})}}},l=o,r=(a("034f"),a("2877")),c=Object(r["a"])(l,n,s,!1,null,null,null);c.options.__file="App.vue";var d=c.exports,u=a("8c4f"),m=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("h2",{staticClass:"title"},[t._v("リスト一覧")]),a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-heading"},[t._v("すべてのリスト")]),t._l(t.mondaiList,function(t){return a("list-link",{key:t.id,attrs:{item:t}})})],2)])},p=[],v={data:function(){return{name:"-",genreFilter:"all",siteFilter:"all",mondaiList:[{id:0,name:"-",editor:{id:0,nickname:"-"},fromMyMondais:!0}]}},mounted:function(){var t=this;this.$http.get("/api/mondaiList").then(function(i){t.mondaiList=i.data}).catch(function(t){console.log(t)})},methods:{url:function(t){return"/mondaiList/show/"+t},to:function(t){this.$router.push(this.url(t))}}},h=v,f=Object(r["a"])(h,m,p,!1,null,null,null);f.options.__file="AllList.vue";var b=f.exports,_=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("div",[a("h2",{staticClass:"title"},[t._v("リストを追加")]),a("b-field",{attrs:{label:"リスト名"}},[a("b-input",{attrs:{type:"text",placeholder:"リスト名",maxlength:"30"},model:{value:t.mondaiList.name,callback:function(i){t.$set(t.mondaiList,"name",i)},expression:"mondaiList.name"}})],1),a("b-field",{attrs:{label:"リストの説明"}},[a("b-input",{attrs:{placeholder:"説明",type:"textarea",maxlength:"200"},model:{value:t.mondaiList.description,callback:function(i){t.$set(t.mondaiList,"description",i)},expression:"mondaiList.description"}})],1),a("div",{staticClass:"field"},[a("b-checkbox",{model:{value:t.mondaiList.fromMyMondais,callback:function(i){t.$set(t.mondaiList,"fromMyMondais",i)},expression:"mondaiList.fromMyMondais"}},[t._v("\n          自作問題のみのリストの場合はチェック\n        ")])],1)],1),a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"buttons has-addons level-item"},[a("span",{staticClass:"button is-primary is-outlined",on:{click:function(i){t.isAddMondaiModalActive=!0}}},[a("b-icon",{attrs:{icon:"plus-circle"}}),t._v(" 問題を追加")],1),a("span",{staticClass:"button is-outlined is-primary",on:{click:t.activateJSONModal}},[a("b-icon",{attrs:{icon:"json"}}),t._v(" JSONモード")],1)])]),a("div",{staticClass:"level-right"},[a("div",{staticClass:"buttons has-addons level-item"},[a("span",{staticClass:"button is-success is-outlined",on:{click:function(i){t.submit()}}},[a("b-icon",{attrs:{icon:"content-save"}}),t._v(" 保存")],1),a("span",{staticClass:"button is-danger is-outlined",on:{click:function(i){t.cancel()}}},[a("b-icon",{attrs:{icon:"close-circle"}}),t._v(" キャンセル")],1)])])]),a("div",{staticClass:"panel"},t._l(t.mondaiList.mondai,function(i){return a("div",{key:i._id,staticClass:"panel-block"},[a("div",{attrs:{title:i.title,"sub-title":i.author}},[a("mondai-view",{staticClass:"block",attrs:{item:i}}),a("div",{staticClass:"buttons has-addons"},[a("button",{staticClass:"button is-outlined is-primary",on:{click:function(a){t.set(i)}}},[a("b-icon",{attrs:{icon:"pencil"}}),a("span",[t._v("編集")])],1),a("button",{staticClass:"button is-outlined is-danger",on:{click:function(a){t.remove(i)}}},[a("b-icon",{attrs:{icon:"minus-circle"}}),a("span",[t._v("削除")])],1)])],1)])})),a("b-modal",{attrs:{id:"myModal",active:t.isAddMondaiModalActive,"has-modal-card":""},on:{"update:active":function(i){t.isAddMondaiModalActive=i}}},[a("div",{staticClass:"modal-card"},[a("div",{staticClass:"modal-card-body"},[a("mondai-dialog",{attrs:{mondai:t.newMondai}}),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(i){t.isAddMondaiModalActive=!1}}},[t._v("キャンセル")]),a("button",{staticClass:"button is-primary",on:{click:t.handleOk}},[t._v("追加")])],1)])]),a("b-modal",{attrs:{id:"editModal",active:t.isEditMondaiModalActive,"has-modal-card":""},on:{"update:active":function(i){t.isEditMondaiModalActive=i}}},[a("div",{staticClass:"modal-card"},[a("div",{staticClass:"modal-card-body"},[a("mondai-dialog",{attrs:{mondai:t.newMondai}}),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(i){t.isEditMondaiModalActive=!1}}},[t._v("キャンセル")]),a("button",{staticClass:"button is-primary",on:{click:t.handleEditOk}},[t._v("編集")])],1)])]),a("b-modal",{attrs:{id:"stringEditModal",active:t.isJSONModalActive},on:{"update:active":function(i){t.isJSONModalActive=i}}},[a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("JSONを読み込み")])]),a("section",{staticClass:"modal-card-body"},[a("b-field",{attrs:{label:"コピーしたJSON文字列からリストを生成できます"}},[a("b-input",{staticClass:"form-control",attrs:{type:"textarea",placeholder:"JSON",rows:6},model:{value:t.mondaiJSON,callback:function(i){t.mondaiJSON=i},expression:"mondaiJSON"}})],1)],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(i){t.isJSONModalActive=!1}}},[t._v("キャンセル")]),a("button",{staticClass:"button is-primary",on:{click:t.handleStringEditOk}},[t._v("読み込み")])])])])],1)},g=[],C=(a("f751"),{data:function(){return{newMondai:{id:0,title:"",author:"",site:"latethink",description:"",genre:"umigame"},tmpMondai:{},mondaiList:{name:"",fromMyMondais:!1,editor:{id:0,nickname:"",username:""},description:"",mondai:[]},mondaiJSON:"[]",isAddMondaiModalActive:!1,isEditMondaiModalActive:!1,isJSONModalActive:!1}},computed:{site:function(){return this.$store.state.site},genre:function(){return this.$store.state.genre}},mounted:function(){},methods:{url:function(t,i){var a=this.site[t].showUrl+i;return a},isValidUrl:function(t){return!!this.site[t]},remove:function(t){this.mondaiList.mondai=this.mondaiList.mondai.filter(function(i){return i!==t})},addMondai:function(){var t=0,i=!1;while(!i)for(var a in i=!0,t++,this.mondaiList.mondai){var e=this.mondaiList.mondai[a];e._id&&e._id===t&&(i=!1)}this.newMondai._id=t;var n=Object.assign({},this.newMondai);this.mondaiList.mondai.push(n),console.log(this.mondaiList.mondai)},submit:function(){var t=this,i=Object.assign({},this.mondaiList);this.$http.post("/api/add",i).then(function(i){var a=i.data;a.error?(t.$toast.open({message:"ログインしてください",type:"is-danger"}),t.$router.push("/login")):a.message&&t.$router.push("/")}).catch(function(i){i&&t.$toast.open({message:"エラー",type:"is-danger"})})},cancel:function(){this.$router.go(-1)},handleOk:function(t){this.addMondai(),this.newMondai={id:0,title:"",author:"",site:"latethink",description:"",genre:"umigame"},this.isAddMondaiModalActive=!1},handleEditOk:function(t){var i=this;this.addMondai(),this.mondaiList.mondai=this.mondaiList.mondai.filter(function(t){return t!==i.tmpMondai}),this.tmpMondai={},this.isEditMondaiModalActive=!1},activateJSONModal:function(){try{var t=JSON.stringify(this.mondaiList.mondai);this.mondaiJSON=t}catch(t){}this.isJSONModalActive=!0},handleStringEditOk:function(t){var i=this;try{var a=JSON.parse(this.mondaiJSON);this.mondaiList.mondai=a.filter(function(t){return i.isValidUrl(t.site)}).map(function(t){return{id:t.id,title:t.title,author:t.author,site:t.site,description:t.description,genre:t.genre,_id:t._id}})}catch(t){console.log(t)}this.isJSONModalActive=!1},set:function(t){this.newMondai=Object.assign({},t),this.tmpMondai=t,this.isEditMondaiModalActive=!0}}}),k=C,M=Object(r["a"])(k,_,g,!1,null,null,null);M.options.__file="AddList.vue";var y=M.exports,w=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("h2",{staticClass:"title"},[t._v("問題リスト")]),a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("span",[t._v("サイト")]),a("b-select",{attrs:{placeholder:"Select a name"},model:{value:t.siteFilter,callback:function(i){t.siteFilter=i},expression:"siteFilter"}},[a("option",{attrs:{value:"all"}},[t._v("すべて")]),a("option",{attrs:{value:"latethink"}},[t._v("ラテシン")]),a("option",{attrs:{value:"cindy"}},[t._v("Cindy")]),a("option",{attrs:{value:"R"}},[t._v("R鯖")])])],1),a("div",{staticClass:"level-item"},[a("span",[t._v("ジャンル")]),a("b-select",{attrs:{placeholder:"Select a genre"},model:{value:t.genreFilter,callback:function(i){t.genreFilter=i},expression:"genreFilter"}},[a("option",{attrs:{value:"all"}},[t._v("すべて")]),a("option",{attrs:{value:"umigame"}},[t._v("ウミガメ")]),a("option",{attrs:{value:"tobira"}},[t._v("20の扉")]),a("option",{attrs:{value:"kameo"}},[t._v("亀夫君問題")]),a("option",{attrs:{value:"other"}},[t._v("その他")])])],1),a("div",{staticClass:"level-item"},[a("a",{staticClass:"button is-outlined is-danger",on:{click:function(i){t.clearFilter()}}},[t._v("クリア")])])]),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("span",[t._v("表示")]),a("b-select",{model:{value:t.detail,callback:function(i){t.detail=i},expression:"detail"}},[a("option",{domProps:{value:!1}},[t._v("リスト")]),a("option",{domProps:{value:!0}},[t._v("詳細")])])],1),a("div",{staticClass:"level-item"},[t.isMine?a("button",{staticClass:"button is-outlined is-secondary",on:{click:function(i){t.$router.push(t.editUrl())}}},[t._v("編集")]):t._e()])])]),a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-heading"},[a("span",{staticClass:"title is-4"},[t._v(t._s(t.mondaiList.name)+" ")]),a("span",{staticClass:"subtitle is-6"},[t._v("リスト作成者: "),a("a",{on:{click:function(i){t.to(t.profileUrl())}}},[t._v(t._s(t.mondaiList.editor.nickname))])]),a("p",{staticClass:"multiline"},[t._v(t._s(t.mondaiList.description))])]),t._l(t.filter(),function(i){return a("a",{key:i.id,staticClass:"panel-block",attrs:{target:"_blank",href:t.url(i.site,i.id)}},[t.detail?a("div",[a("mondai-view",{attrs:{item:i}})],1):a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("small",[t._v(t._s(i.author)+" ")]),a("span",[t._v(t._s(i.title))])])]),a("div",{staticClass:"level-right"},[a("b-tag",{staticClass:"is-primary level-item"},[t._v(t._s(t.site[i.site].name))]),a("b-tag",{staticClass:"is-info level-item"},[t._v(t._s(t.genre[i.genre]))])],1)])])})],2)])},L=[],$={data:function(){return{name:"MondaiList",genreFilter:"all",siteFilter:"all",detail:!1,isMine:!1,mondaiList:{name:"-",description:"-",editor:{id:0,username:"-",nickname:"-"},mondai:[{id:0,title:"-",author:"-",site:"latethink",description:"-",genre:"umigame"}]}}},computed:{site:function(){return this.$store.state.site},genre:function(){return this.$store.state.genre}},mounted:function(){var t=this,i=this.$route.params.id;this.$http.get("/api/mondaiList/show/"+i).then(function(i){t.mondaiList=i.data}).catch(function(t){console.log(t)}).then(function(){t.$http.get("/api/user").then(function(i){i&&i.data&&i.data.username===t.mondaiList.editor.username&&(t.isMine=!0)})})},methods:{url:function(t,i){return this.site[t].showUrl+i},editUrl:function(){return"/mondaiList/edit/"+this.mondaiList.id},profileUrl:function(){return"/profile/show/"+this.mondaiList.editor.id},to:function(t){this.$router.push(t)},filter:function(){var t=this,i=this.mondaiList.mondai;return"all"!==this.genreFilter&&(i=i.filter(function(i){return i.genre===t.genreFilter})),"all"!==this.siteFilter&&(i=i.filter(function(i){return i.site===t.siteFilter})),i},clearFilter:function(){this.genreFilter="all",this.siteFilter="all"}}},O=$,x=(a("4dba"),Object(r["a"])(O,w,L,!1,null,"a95f95e8",null));x.options.__file="MondaiList.vue";var S=x.exports,A=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("h2",{staticClass:"title"},[t._v("ユーザー登録")]),a("div",[a("b-field",{attrs:{label:"ニックネーム"}},[a("b-input",{attrs:{maxlength:"10",type:"text",placeholder:"NickName"},model:{value:t.credential.nickname,callback:function(i){t.$set(t.credential,"nickname",i)},expression:"credential.nickname"}})],1),a("b-field",{attrs:{label:"ユーザー名"}},[a("b-input",{attrs:{maxlength:"10",type:"text",placeholder:"User Name"},model:{value:t.credential.username,callback:function(i){t.$set(t.credential,"username",i)},expression:"credential.username"}})],1),a("b-field",{attrs:{label:"パスワード"}},[a("b-input",{attrs:{type:"password",maxlength:"20",placeholder:"Password","password-reveal":""},model:{value:t.credential.password,callback:function(i){t.$set(t.credential,"password",i)},expression:"credential.password"}})],1),a("button",{staticClass:"button is-primary is-outlined",on:{click:function(i){t.signup()}}},[a("b-icon",{attrs:{icon:"account-plus"}}),a("span",[t._v("新規登録")])],1)],1)])},N=[],E={data:function(){return{credential:{nickname:"",username:"",password:""}}},methods:{signup:function(){var t=this;this.$http.post("/api/signup",t.credential).then(function(i){i.data.error?t.$toast.open({message:i.data.error,type:"is-danger"}):t.$router.push("/login")}).catch(function(i){i&&(console.log(i),t.$toast.open({message:"サーバーのエラーです。",type:"is-danger"}))})}}},J=E,j=Object(r["a"])(J,A,N,!1,null,null,null);j.options.__file="SignUp.vue";var U=j.exports,P=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("h2",{staticClass:"title"},[t._v("ログイン")]),a("div",{staticClass:"mb-2",attrs:{method:"post"}},[a("b-field",{attrs:{label:"ユーザー名"}},[a("b-input",{staticClass:"form-control mb-2",attrs:{type:"text",name:"username",placeholder:"User Name"},model:{value:t.credential.username,callback:function(i){t.$set(t.credential,"username",i)},expression:"credential.username"}})],1),a("b-field",{attrs:{label:"パスワード"}},[a("b-input",{staticClass:"form-control mb-2",attrs:{type:"password",name:"password",placeholder:"Password"},model:{value:t.credential.password,callback:function(i){t.$set(t.credential,"password",i)},expression:"credential.password"}})],1),a("button",{staticClass:"button is-primary is-outlined mb-2",on:{click:function(i){t.login()}}},[a("b-icon",{attrs:{icon:"login"}}),a("span",[t._v("ログイン")])],1)],1)])},F=[],R={data:function(){return{credential:{username:"",password:""},showError:!1}},methods:{login:function(){var t=this;this.$http.post("/api/login",t.credential).then(function(i){t.$router.push("/"),t.$store.commit("setUser",i.data.user)}).catch(function(i){i&&(t.showError=!0,t.$toast.open({message:"認証に失敗しました。ユーザー名およびパスワードを確認してください。",type:"is-danger"}))})}}},T=R,V=Object(r["a"])(T,P,F,!1,null,null,null);V.options.__file="LogIn.vue";var D=V.exports,G=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("div",{staticClass:"mb-2"},[a("h2",{staticClass:"title"},[t._v("リストを編集")]),a("b-field",{attrs:{label:"リスト名"}},[a("b-input",{attrs:{type:"text",placeholder:"リスト名",maxlength:"30"},model:{value:t.mondaiList.name,callback:function(i){t.$set(t.mondaiList,"name",i)},expression:"mondaiList.name"}})],1),a("b-field",{attrs:{label:"リストの説明"}},[a("b-input",{attrs:{placeholder:"説明",type:"textarea",maxlength:"200"},model:{value:t.mondaiList.description,callback:function(i){t.$set(t.mondaiList,"description",i)},expression:"mondaiList.description"}})],1),a("div",{staticClass:"field"},[a("b-checkbox",{model:{value:t.mondaiList.fromMyMondais,callback:function(i){t.$set(t.mondaiList,"fromMyMondais",i)},expression:"mondaiList.fromMyMondais"}},[t._v("\n          自作問題のみのリストの場合はチェック\n        ")])],1)],1),a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"buttons has-addons level-item"},[a("span",{staticClass:"button is-primary is-outlined",on:{click:function(i){t.isAddMondaiModalActive=!0}}},[a("b-icon",{attrs:{icon:"plus-circle"}}),t._v(" 問題を追加")],1),a("span",{staticClass:"button is-outlined is-primary",on:{click:t.activateJSONModal}},[a("b-icon",{attrs:{icon:"json"}}),t._v(" JSONモード")],1)])]),a("div",{staticClass:"level-right"},[a("div",{staticClass:"buttons has-addons level-item"},[a("span",{staticClass:"button is-success is-outlined",on:{click:function(i){t.submit()}}},[a("b-icon",{attrs:{icon:"content-save"}}),t._v(" 保存")],1),a("span",{staticClass:"button is-danger is-outlined",on:{click:function(i){t.cancel()}}},[a("b-icon",{attrs:{icon:"close-circle"}}),t._v(" キャンセル")],1)])])]),a("div",{staticClass:"panel"},t._l(t.mondaiList.mondai,function(i){return a("div",{key:i._id,staticClass:"panel-block"},[a("div",{attrs:{title:i.title,"sub-title":i.author}},[a("mondai-view",{staticClass:"block",attrs:{item:i}}),a("div",{staticClass:"buttons has-addons"},[a("button",{staticClass:"button is-outlined is-primary",on:{click:function(a){t.set(i)}}},[a("b-icon",{attrs:{icon:"pencil"}}),a("span",[t._v("編集")])],1),a("button",{staticClass:"button is-outlined is-danger",on:{click:function(a){t.remove(i)}}},[a("b-icon",{attrs:{icon:"minus-circle"}}),a("span",[t._v("削除")])],1)])],1)])})),a("b-modal",{attrs:{id:"myModal",active:t.isAddMondaiModalActive,"has-modal-card":""},on:{"update:active":function(i){t.isAddMondaiModalActive=i}}},[a("div",{staticClass:"modal-card"},[a("div",{staticClass:"modal-card-body"},[a("mondai-dialog",{attrs:{mondai:t.newMondai}}),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(i){t.isAddMondaiModalActive=!1}}},[t._v("キャンセル")]),a("button",{staticClass:"button is-primary",on:{click:t.handleOk}},[t._v("追加")])],1)])]),a("b-modal",{attrs:{id:"editModal",active:t.isEditMondaiModalActive,"has-modal-card":""},on:{"update:active":function(i){t.isEditMondaiModalActive=i}}},[a("div",{staticClass:"modal-card"},[a("div",{staticClass:"modal-card-body"},[a("mondai-dialog",{attrs:{mondai:t.newMondai}}),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(i){t.isEditMondaiModalActive=!1}}},[t._v("キャンセル")]),a("button",{staticClass:"button is-primary",on:{click:t.handleEditOk}},[t._v("編集")])],1)])]),a("b-modal",{attrs:{id:"stringEditModal",active:t.isJSONModalActive},on:{"update:active":function(i){t.isJSONModalActive=i}}},[a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("JSONを読み込み")])]),a("section",{staticClass:"modal-card-body"},[a("b-field",{attrs:{label:"コピーしたJSON文字列からリストを生成できます"}},[a("b-input",{staticClass:"form-control",attrs:{type:"textarea",placeholder:"JSON",rows:6},model:{value:t.mondaiJSON,callback:function(i){t.mondaiJSON=i},expression:"mondaiJSON"}})],1)],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(i){t.isJSONModalActive=!1}}},[t._v("キャンセル")]),a("button",{staticClass:"button is-primary",on:{click:t.handleStringEditOk}},[t._v("読み込み")])])])])],1)},I=[],z={data:function(){return{newMondai:{id:0,title:"",author:"",site:"latethink",description:"",genre:"umigame"},tmpMondai:{},mondaiList:{name:"",fromMyMondais:!1,editor:{nickname:"",username:""},description:"",mondai:[]},mondaiJSON:"",isAddMondaiModalActive:!1,isEditMondaiModalActive:!1,isJSONModalActive:!1}},computed:{site:function(){return this.$store.state.site},genre:function(){return this.$store.state.genre}},mounted:function(){var t=this.$route.params.id,i=this;this.$http.get("/api/mondaiList/show/"+t).then(function(t){i.mondaiList=t.data}).catch(function(t){console.log(t)})},methods:{url:function(t,i){return this.site[t].showUrl+i},isValidUrl:function(t){return!!this.site[t]},remove:function(t){this.mondaiList.mondai=this.mondaiList.mondai.filter(function(i){return i!==t})},addMondai:function(){var t=0,i=!1;while(!i)for(var a in i=!0,t++,this.mondaiList.mondai){var e=this.mondaiList.mondai[a];e._id&&e._id===t&&(i=!1)}this.newMondai._id=t;var n=Object.assign({},this.newMondai);this.mondaiList.mondai.push(n),console.log(this.mondaiList.mondai)},submit:function(){var t=this;this.$http.post("/api/mondaiList/edit/"+this.mondaiList.id,this.mondaiList).then(function(i){var a=i.data;a.error?t.$toast.open({message:"編集権限がありません。",type:"is-danger"}):a.message&&t.$router.push("/")}).catch(function(i){i&&(t.$toast.open({message:"ログインしてください。",type:"is-danger"}),t.$router.push("/login"))})},cancel:function(){this.$router.go(-1)},handleOk:function(t){this.addMondai(),this.newMondai={id:0,title:"",author:"",site:"latethink",description:"",genre:"umigame"},this.isAddMondaiModalActive=!1},handleEditOk:function(t){var i=this;this.addMondai(),this.mondaiList.mondai=this.mondaiList.mondai.filter(function(t){return t!==i.tmpMondai}),this.tmpMondai={},this.isEditMondaiModalActive=!1},activateJSONModal:function(){try{var t=JSON.stringify(this.mondaiList.mondai);this.mondaiJSON=t}catch(t){}this.isJSONModalActive=!0},handleStringEditOk:function(t){var i=this;try{var a=JSON.parse(this.mondaiJSON);this.mondaiList.mondai=a.filter(function(t){return i.isValidUrl(t.site)}).map(function(t){return{id:t.id,title:t.title,author:t.author,site:t.site,description:t.description,genre:t.genre,_id:t._id}})}catch(t){console.log(t)}this.isJSONModalActive=!1},set:function(t){this.newMondai=Object.assign({},t),this.tmpMondai=t,this.isEditMondaiModalActive=!0}}},B=z,H=Object(r["a"])(B,G,I,!1,null,null,null);H.options.__file="EditList.vue";var q=H.exports,K=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("h2",{staticClass:"title"},[t._v("マイページ")]),a("div",{staticClass:"card",attrs:{id:"profile"}},[a("p",{staticClass:"title is-4"},[t._v(t._s(t.profile.nickname))]),a("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.profile.username))]),a("div",{staticClass:"card-text"},[a("p",{staticClass:"multiline"},[t._v(t._s(t.profile.bio))]),a("p",[t._v("登録日時："+t._s(t.profile.signup_date))])]),a("a",{on:{click:function(i){t.isEditProfileModalActive=!0}}},[t._v("編集")])]),a("b-modal",{attrs:{id:"myModal",active:t.isEditProfileModalActive,title:"プロフィールを編集"},on:{"update:active":function(i){t.isEditProfileModalActive=i}}},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("プロフィールを編集")])]),a("section",{staticClass:"modal-card-body"},[a("b-input",{attrs:{type:"textarea",placeholder:"自己紹介",rows:6},model:{value:t.profile.bio,callback:function(i){t.$set(t.profile,"bio","string"===typeof i?i.trim():i)},expression:"profile.bio"}})],1),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(i){t.isEditProfileModalActive=!1}}},[t._v("キャンセル")]),a("button",{staticClass:"button is-primary",on:{click:t.handleOk}},[t._v("編集")])])]),a("div",{staticClass:"panel"},[a("p",{staticClass:"panel-heading"},[t._v("作成したリスト")]),t._l(t.mondaiList,function(t){return a("list-link",{key:t.id,attrs:{item:t}})})],2)],1)},Q=[],W={data:function(){return{profile:{nickname:"-",username:"-",signup_date:"-",bio:"-"},mondaiList:[{id:0,name:"-",editor:{nickname:"-"},fromMyMondais:!0}],isEditProfileModalActive:!1}},mounted:function(){var t=this;this.$http.get("/api/mypage").then(function(i){t.profile=i.data,t.$http.get("/api/mondaiList").then(function(i){t.mondaiList=i.data.filter(function(i){return i.editor.username===t.$store.state.user.username})}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})},methods:{url:function(t){return"/mondaiList/show/"+t},handleOk:function(t){this.$http.post("/api/profile/edit",{bio:this.profile.bio}),this.isEditProfileModalActive=!1}}},X=W,Y=(a("8750"),Object(r["a"])(X,K,Q,!1,null,"090eb8a0",null));Y.options.__file="MyPage.vue";var Z=Y.exports,tt=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("h2",{staticClass:"title"},[t._v("プロフィール")]),a("div",{staticClass:"card",attrs:{id:"profile"}},[a("p",{staticClass:"title is-4"},[t._v(t._s(t.profile.nickname))]),a("div",{staticClass:"card-text"},[a("p",{staticClass:"multiline"},[t._v(t._s(t.profile.bio))]),a("p",[t._v("登録日時："+t._s(t.profile.signup_date))])])]),a("div",{staticClass:"panel"},[a("p",{staticClass:"panel-heading"},[t._v("作成したリスト")]),t._l(t.mondaiList,function(t){return a("list-link",{key:t.id,attrs:{item:t}})})],2)])},it=[],at={data:function(){return{profile:{id:0,nickname:"-",bio:"-",signup_date:"-"},mondaiList:[{id:0,name:"-",editor:{nickname:"-"},fromMyMondais:!0}]}},mounted:function(){var t=this,i=this.$route.params.id;this.$http.get("/api/profile/show/"+i).then(function(i){i&&(t.profile=i.data,t.$http.get("/api/mondaiList").then(function(i){i&&(t.mondaiList=i.data.filter(function(i){return i.editor.id===t.profile.id}))}).catch(function(t){console.log(t)}))}).catch(function(t){console.log(t)})},methods:{url:function(t){return"/mondaiList/show/"+t}}},et=at,nt=(a("c927"),Object(r["a"])(et,tt,it,!1,null,"09a6e72a",null));nt.options.__file="Profile.vue";var st=nt.exports,ot=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("h2",{staticClass:"title"},[t._v("連絡先")]),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header-title"},[t._v("\n    管理人\n    ")]),a("footer",{staticClass:"card-footer"},[a("a",{staticClass:"card-footer-item",attrs:{target:"_blank",href:"http://sui-hei.net/mondai/profile/7485"}},[t._v("ラテシン"),a("b-icon",{attrs:{icon:"open-in-new"}})],1),a("a",{staticClass:"card-footer-item",attrs:{target:"_blank",href:"https://www.cindythink.com/profile/show/7"}},[t._v("Cindy"),a("b-icon",{attrs:{icon:"open-in-new"}})],1),a("a",{staticClass:"card-footer-item",attrs:{target:"_blank",href:"http://openumigame.sakura.ne.jp/openumi/users/userprof/16"}},[t._v("R鯖"),a("b-icon",{attrs:{icon:"open-in-new"}})],1),a("a",{staticClass:"card-footer-item",attrs:{target:"_blank",href:"https://twitter.com/ninjin_umigame"}},[a("b-icon",{attrs:{icon:"twitter"}}),t._v("Twitter"),a("b-icon",{attrs:{icon:"open-in-new"}})],1),a("a",{staticClass:"card-footer-item",attrs:{target:"_blank",href:"https://github.com/pb10001"}},[a("b-icon",{attrs:{icon:"github-circle"}}),t._v("GitHub"),a("b-icon",{attrs:{icon:"open-in-new"}})],1)])])])},lt=[],rt={},ct=Object(r["a"])(rt,ot,lt,!1,null,null,null);ct.options.__file="Contact.vue";var dt=ct.exports;e["default"].use(u["a"]);var ut=new u["a"]({mode:"history",routes:[{path:"/",name:"AllList",component:b},{path:"/add",name:"AddList",component:y},{path:"/mondaiList/edit/:id",name:"EditList",component:q},{path:"/mondaiList/show/:id",name:"MondaiList",component:S},{path:"/signup",name:"SignUp",component:U},{path:"/login",name:"login",component:D},{path:"/mypage",name:"MyPage",component:Z},{path:"/profile/show/:id",name:"Profile",component:st},{path:"/contact",name:"Contact",component:dt}]}),mt=a("2f62");e["default"].use(mt["a"]);var pt=new mt["a"].Store({state:{user:{id:0,nickname:"Guest",username:""},genre:{umigame:"ウミガメのスープ",tobira:"20の扉",kameo:"亀夫君問題",other:"その他"},site:{latethink:{name:"ラテシン",showUrl:"http://sui-hei.net/mondai/show/"},cindy:{name:"Cindy",showUrl:"https://www.cindythink.com/puzzle/show/"},R:{name:"Openウミガメ R鯖",showUrl:"http://openumigame.sakura.ne.jp/openumi/mondai/show/"}}},mutations:{setUser:function(t,i){t.user=i}},getters:{user:function(t){return t.user},genre:function(t){return t.genre},site:function(t){return t.site}}}),vt=a("bc3a"),ht=a.n(vt),ft=a("8a03"),bt=a.n(ft),_t=(a("5abe"),function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("p",{staticClass:"title is-4"},[t._v(t._s(t.item.title))]),a("p",{staticClass:"subtitle is-6"},[t._v(t._s(t.item.author))]),a("p",{staticClass:"multiline"},[t._v(t._s(t.item.description))]),a("a",{attrs:{target:"_blank",href:t.url(t.item.site,t.item.id)}},[t._v(t._s(t.url(t.item.site,t.item.id)))]),a("br"),a("b-tag",{staticClass:"is-primary"},[t._v(t._s(t.site[t.item.site].name))]),a("b-tag",{staticClass:"is-info"},[t._v(t._s(t.genre[t.item.genre]))]),a("br")],1)}),gt=[],Ct=(a("c5f6"),{parent:{},props:{item:{id:Number,title:String,site:String,author:String,genre:String,description:String}},computed:{site:function(){return this.$store.state.site},genre:function(){return this.$store.state.genre}},methods:{url:function(t,i){return this.site[t].showUrl+i}}}),kt=Ct,Mt=Object(r["a"])(kt,_t,gt,!1,null,null,null);Mt.options.__file="MondaiView.vue";var yt=Mt.exports,wt=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("router-link",{staticClass:"panel-block",attrs:{to:t.url(t.item.id)}},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("strong",[t._v(t._s(t.item.name)+" ")]),a("small",{staticClass:"is-6"},[t._v("リスト作成者： "+t._s(t.item.editor.nickname))])])]),a("div",{staticClass:"level-right"},[t.item.fromMyMondais?a("b-tag",{staticClass:"is-primary level-item"},[t._v("自作問題のみ")]):t._e(),a("span",{staticClass:"level-item"},[t._v(t._s(t.item.updateDate))])],1)])])},Lt=[],$t={props:{item:{id:Number,name:String,fromMyMondais:Boolean,editor:{nickname:String}}},methods:{url:function(t){return"/mondaiList/show/"+t}}},Ot=$t,xt=(a("bb35"),Object(r["a"])(Ot,wt,Lt,!1,null,"b43ab254",null));xt.options.__file="ListLinkView.vue";var St=xt.exports,At=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("div",{staticClass:"level"},[a("div",{staticClass:"level-item"},[a("label",[t._v("サイト")]),a("b-select",{attrs:{placeholder:"Select a name"},model:{value:t.mondai.site,callback:function(i){t.$set(t.mondai,"site",i)},expression:"mondai.site"}},[a("option",{attrs:{value:"latethink"}},[t._v("ラテシン")]),a("option",{attrs:{value:"cindy"}},[t._v("Cindy")]),a("option",{attrs:{value:"R"}},[t._v("R鯖")])])],1),a("div",{staticClass:"level-item"},[a("label",[t._v("ジャンル")]),a("b-select",{attrs:{placeholder:"Select a genre"},model:{value:t.mondai.genre,callback:function(i){t.$set(t.mondai,"genre",i)},expression:"mondai.genre"}},[a("option",{attrs:{value:"umigame"}},[t._v("ウミガメ")]),a("option",{attrs:{value:"tobira"}},[t._v("20の扉")]),a("option",{attrs:{value:"kameo"}},[t._v("亀夫君問題")]),a("option",{attrs:{value:"other"}},[t._v("その他")])])],1)]),a("b-field",{attrs:{label:"問題ID"}},[a("b-input",{attrs:{type:"number",placeholder:"ID"},model:{value:t.mondai.id,callback:function(i){t.$set(t.mondai,"id",i)},expression:"mondai.id"}})],1),a("b-field",{attrs:{label:"タイトル"}},[a("b-input",{attrs:{type:"text",placeholder:"タイトル",maxlength:"100"},model:{value:t.mondai.title,callback:function(i){t.$set(t.mondai,"title",i)},expression:"mondai.title"}})],1),a("b-field",{attrs:{label:"問題の作者"}},[a("b-input",{attrs:{type:"text",placeholder:"作者",maxlength:"20"},model:{value:t.mondai.author,callback:function(i){t.$set(t.mondai,"author",i)},expression:"mondai.author"}})],1),a("b-field",{attrs:{label:"コメント"}},[a("b-input",{attrs:{type:"textarea",maxlength:"200",placeholder:"コメント"},model:{value:t.mondai.description,callback:function(i){t.$set(t.mondai,"description",i)},expression:"mondai.description"}})],1)],1)},Nt=[],Et={props:{mondai:{id:Number,title:String,author:String,site:String,description:String,genre:String}}},Jt=Et,jt=Object(r["a"])(Jt,At,Nt,!1,null,null,null);jt.options.__file="MondaiDialog.vue";var Ut=jt.exports;e["default"].use(bt.a),e["default"].prototype.$http=ht.a,e["default"].component("mondai-view",yt),e["default"].component("list-link",St),e["default"].component("mondai-dialog",Ut),e["default"].config.productionTip=!1,new e["default"]({router:ut,store:pt,render:function(t){return t(d)}}).$mount("#app")},6883:function(t,i,a){},8750:function(t,i,a){"use strict";var e=a("6883"),n=a.n(e);n.a},a761:function(t,i,a){},bb35:function(t,i,a){"use strict";var e=a("ca87"),n=a.n(e);n.a},c21b:function(t,i,a){},c927:function(t,i,a){"use strict";var e=a("a761"),n=a.n(e);n.a},ca87:function(t,i,a){},ddf5:function(t,i,a){}});
//# sourceMappingURL=app.840e4222.js.map